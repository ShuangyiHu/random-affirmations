<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Amanda çš„æ¯æ—¥è‚¯å®šè¯­</title>
    <style>
      :root {
        --bg: #fff8f3;
        --card: #ffffffee;
        --text: #3c3a36;
        --muted: #7a746d;
        --accent: #ff9f8c;
        --accent-hover: #ffb7a5;
        --ring: #f88c75;
        --line: #efe8e3;
        --ok: #10b981;
        --danger: #ef4444;
      }
      * {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: "Segoe UI", system-ui, -apple-system, Roboto, Helvetica,
          Arial;
        background: linear-gradient(
          180deg,
          #fff6ef 0%,
          #ffeede 50%,
          #fff5eb 100%
        );
        color: var(--text);
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 28px 0 48px;
      }
      .wrap {
        width: min(1100px, 94vw);
      }
      .greeting {
        text-align: center;
        margin-bottom: 16px;
      }
      .greeting h2 {
        font-size: 36px;
        margin: 0;
        color: #5c4033;
        font-weight: 700;
      }
      .greeting p {
        font-size: 18px;
        color: var(--muted);
        margin-top: 8px;
      }
      .card {
        background: var(--card);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(0, 0, 0, 0.05);
        border-radius: 28px;
        padding: 56px clamp(30px, 6vw, 72px);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
        margin-bottom: 20px;
      }
      header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 16px;
        margin-bottom: 16px;
      }
      h1 {
        font-size: 22px;
        margin: 0;
        letter-spacing: 0.5px;
        color: var(--muted);
        font-weight: 600;
      }
      .hint {
        font-size: 13px;
        color: var(--muted);
      }
      .quote {
        font-size: clamp(26px, 3.5vw, 38px);
        line-height: 1.6;
        margin: 28px 0 28px;
        color: #3c3a36;
      }
      .controls {
        display: flex;
        gap: 12px;
        align-items: center;
        flex-wrap: wrap;
      }
      button {
        background: var(--accent);
        color: #fff;
        border: 0;
        padding: 10px 18px;
        border-radius: 10px;
        font-weight: 600;
        cursor: pointer;
        font-size: 16px;
        transition: background 0.2s ease, transform 0.15s ease;
      }
      button:hover {
        background: var(--accent-hover);
        transform: translateY(-1px);
      }
      button:focus {
        outline: 2px solid var(--ring);
        outline-offset: 3px;
      }
      .ghost {
        background: transparent;
        border: 1px solid rgba(0, 0, 0, 0.15);
        color: var(--text);
        font-size: 16px;
        padding: 10px 18px;
        border-radius: 10px;
      }
      footer {
        margin-top: 14px;
        font-size: 14px;
        color: var(--muted);
      }
      .fade {
        opacity: 0;
        transform: translateY(6px);
        transition: opacity 0.3s ease, transform 0.3s ease;
      }
      .fade.show {
        opacity: 1;
        transform: translateY(0);
      }
      .small {
        font-size: 13px;
        color: var(--muted);
      }

      /* To-Do Section */
      .todo-card {
        padding: 28px clamp(20px, 4vw, 40px);
      }
      .todo-head {
        display: flex;
        flex-wrap: wrap;
        gap: 14px;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 10px;
      }
      .todo-title {
        font-size: 20px;
        color: #5c4033;
        margin: 0;
        font-weight: 700;
      }
      .todo-sub {
        font-size: 13px;
        color: var(--muted);
      }
      .todo-row {
        display: flex;
        gap: 10px;
        align-items: center;
        margin: 8px 0 16px;
      }
      .todo-input {
        flex: 1;
        border: 1px solid var(--line);
        border-radius: 10px;
        padding: 10px 12px;
        font-size: 15px;
        outline: none;
      }
      .todo-input:focus {
        border-color: var(--ring);
        box-shadow: 0 0 0 2px #f88c7530;
      }
      .date {
        border: 1px solid var(--line);
        border-radius: 10px;
        padding: 8px 10px;
        font-size: 14px;
        color: var(--text);
        background: #fff;
      }
      .todo-list {
        list-style: none;
        padding: 0;
        margin: 0;
        border-top: 1px dashed var(--line);
      }
      .todo-item {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 12px 6px;
        border-bottom: 1px dashed var(--line);
      }
      .todo-item label {
        flex: 1;
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .todo-item input[type=\"checkbox\"] {
        width: 18px;
        height: 18px;
      }
      .todo-text {
        flex: 1;
      }
      .todo-text.done {
        color: #9aa0a6;
        text-decoration: line-through;
      }
      .todo-actions {
        display: flex;
        gap: 8px;
      }
      .btn-ghost {
        background: transparent;
        border: 1px solid rgba(0, 0, 0, 0.12);
        color: var(--text);
        padding: 8px 12px;
        border-radius: 10px;
        font-size: 14px;
      }
      .btn-ok {
        background: var(--ok);
        color: #fff;
        border: 0;
      }
      .btn-danger {
        background: var(--danger);
        color: #fff;
        border: 0;
      }
      .stats {
        display: flex;
        align-items: center;
        gap: 12px;
        justify-content: space-between;
        margin-top: 10px;
        color: var(--muted);
        font-size: 13px;
      }
      .bar {
        height: 10px;
        background: #f1efe9;
        border-radius: 999px;
        overflow: hidden;
        flex: 1;
      }
      .bar > span {
        display: block;
        height: 100%;
        background: var(--ok);
        width: 0%;
        transition: width 0.25s ease;
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <div class="greeting">
        <h2>æ–°çš„ä¸€å¤©å¼€å§‹äº†ï¼ğŸ™Œ</h2>
        <p>æ„¿ä»Šå¤©çš„ä½ ğŸ‘©ğŸ»â€ğŸ’»æ¸©æš–ã€è‡ªä¿¡ã€é—ªé—ªå‘å…‰ã€‚</p>
      </div>

      <!-- Affirmation -->
      <div class="card" id="card" tabindex="0">
        <header>
          <h1>æ¯æ—¥è‚¯å®šè¯­ Â· Random Affirmation</h1>
          <div class="hint">ç‚¹å‡»å¡ç‰‡ / æŒ‰ç©ºæ ¼ / ç‚¹å‡»æŒ‰é’® åˆ·æ–°</div>
        </header>
        <div id="quote" class="quote fade">åŠ è½½ä¸­...</div>
        <div class="controls">
          <button id="nextBtn">ğŸ¥° æ¢ä¸€å¥</button>
          <button id="copyBtn" class="ghost">ğŸ“‹ å¤åˆ¶</button>
          <span class="small" id="counter"></span>
        </div>
        <footer>æ¯å¤©è¯»ä¸€å¥ï¼Œæ¸©æŸ”ã€æœ‰åŠ›åœ°å¼€å¯æ–°çš„ä¸€å¤©ã€‚</footer>
      </div>

      <!-- To-Do -->
      <div class="card todo-card" id="todoCard">
        <div class="todo-head">
          <h3 class="todo-title">ä»Šæ—¥å¾…åŠ Â· To-Do</h3>
          <div>
            <label class="todo-sub" for="todoDate">é€‰æ‹©æ—¥æœŸï¼š</label>
            <input id="todoDate" class="date" type="date" />
          </div>
        </div>
        <div class="todo-row">
          <input
            id="todoInput"
            class="todo-input"
            placeholder="å†™ä¸‹ä½ ä»Šå¤©è¦å®Œæˆçš„ä¸€ä»¶å°äº‹â€¦ å›è½¦æ·»åŠ "
          />
          <button id="addBtn" class="btn-ghost">æ·»åŠ </button>
        </div>
        <ul id="todoList" class="todo-list"></ul>
        <div class="stats">
          <div>è¿›åº¦ï¼š<span id="statText">0/0</span></div>
          <div class="bar"><span id="statBar"></span></div>
          <div class="todo-actions">
            <button id="clearDone" class="btn-ghost">æ¸…é™¤å·²å®Œæˆ</button>
            <button id="clearAll" class="btn-ghost">æ¸…ç©º</button>
          </div>
        </div>
      </div>
    </div>

    <script>
      /* === è‚¯å®šè¯­ === */
      const AFFIRMATIONS = [
        "æˆ‘æ­£èµ°åœ¨æˆä¸ºä¼˜ç§€ SDE çš„è·¯ä¸Šã€‚",
        "æˆ‘å€¼å¾—æ‹¥æœ‰ä¸€ä»½è®©æˆ‘å……æ»¡çƒ­æƒ…çš„å·¥ä½œã€‚",
        "æ¯ä¸€ä¸ªæ—©èµ·çš„æ¸…æ™¨éƒ½è®©æˆ‘ç¦»æˆåŠŸæ›´è¿‘ã€‚",
        "æˆ‘ç›¸ä¿¡è‡ªå·±æ­£åœ¨è¢«ç†æƒ³çš„æœºä¼šçœ‹è§ã€‚",
        "æˆ‘é…å¾—ä¸Šå¹´è–ª $150K+ çš„èŒä½ä¸è®¤å¯ã€‚",
        "æˆ‘ä¸“æ³¨ã€èªæ˜ã€æœ‰æ¯…åŠ›ï¼Œæˆ‘çš„åŠªåŠ›ä¼šè¢«å›æŠ¥ã€‚",
      ];
      const quoteEl = document.getElementById("quote");
      const nextBtn = document.getElementById("nextBtn");
      const copyBtn = document.getElementById("copyBtn");
      const counter = document.getElementById("counter");
      let lastIndex = -1,
        seen = new Set();
      function pickRandomIndex() {
        if (seen.size === AFFIRMATIONS.length) seen.clear();
        let idx;
        do {
          idx = Math.floor(Math.random() * AFFIRMATIONS.length);
        } while (idx === lastIndex);
        lastIndex = idx;
        seen.add(idx);
        counter.textContent = `ä»Šæ—¥å·²é˜…ï¼š${seen.size}/${AFFIRMATIONS.length}`;
        return idx;
      }
      function showRandom() {
        const idx = pickRandomIndex();
        const text = AFFIRMATIONS[idx];
        quoteEl.classList.remove("show");
        setTimeout(() => {
          quoteEl.textContent = text;
          quoteEl.classList.add("show");
        }, 80);
      }
      nextBtn.onclick = showRandom;
      copyBtn.onclick = () =>
        navigator.clipboard.writeText(quoteEl.textContent);
      window.addEventListener("DOMContentLoaded", () => {
        showRandom();
        initTodo();
      });

      /* === To-Do === */
      const todoDateEl = document.getElementById("todoDate");
      const todoInput = document.getElementById("todoInput");
      const addBtn = document.getElementById("addBtn");
      const todoList = document.getElementById("todoList");
      const statText = document.getElementById("statText");
      const statBar = document.getElementById("statBar");
      const clearDone = document.getElementById("clearDone");
      const clearAll = document.getElementById("clearAll");

      function fmtDate(d) {
        return d.toISOString().split("T")[0];
      }
      function keyFor(date) {
        return "todo-" + date;
      }
      function load(date) {
        try {
          return JSON.parse(localStorage.getItem(keyFor(date)) || "[]");
        } catch {
          return [];
        }
      }
      function save(date, items) {
        localStorage.setItem(keyFor(date), JSON.stringify(items));
      }
      function render(date) {
        const items = load(date);
        todoList.innerHTML = "";
        items.forEach((it, i) => {
          const li = document.createElement("li");
          li.className = "todo-item";
          li.innerHTML = `<label><input type='checkbox' ${
            it.done ? "checked" : ""
          } data-idx='${i}'/><span class='todo-text ${
            it.done ? "done" : ""
          }' contenteditable='true' data-idx='${i}'>${it.text}</span></label>
          <div class='todo-actions'><button class='btn-ghost' data-act='up' data-idx='${i}'>â†‘</button><button class='btn-ghost' data-act='down' data-idx='${i}'>â†“</button><button class='btn-ghost btn-danger' data-act='del' data-idx='${i}'>åˆ é™¤</button></div>`;
          todoList.appendChild(li);
        });
        const done = items.filter((x) => x.done).length;
        statText.textContent = `${done}/${items.length}`;
        statBar.style.width = items.length
          ? Math.round((done / items.length) * 100) + "%"
          : "0%";
      }
      function initTodo() {
        const today = fmtDate(new Date());
        todoDateEl.value = today;
        render(today);
        todoDateEl.onchange = () => render(todoDateEl.value);
        function add() {
          const text = todoInput.value.trim();
          if (!text) return;
          const d = todoDateEl.value;
          const items = load(d);
          items.push({ text, done: false });
          save(d, items);
          todoInput.value = "";
          render(d);
        }
        addBtn.onclick = add;
        todoInput.onkeydown = (e) => {
          if (e.key === "Enter") add();
        };
        todoList.onchange = (e) => {
          const idx = e.target.dataset.idx;
          if (idx == null) return;
          const d = todoDateEl.value;
          const items = load(d);
          items[idx].done = e.target.checked;
          save(d, items);
          render(d);
        };
        todoList.oninput = (e) => {
          if (!e.target.classList.contains("todo-text")) return;
          const d = todoDateEl.value;
          const items = load(d);
          items[e.target.dataset.idx].text = e.target.textContent.trim();
          save(d, items);
        };
        todoList.onclick = (e) => {
          const act = e.target.dataset.act;
          if (!act) return;
          const idx = +e.target.dataset.idx;
          const d = todoDateEl.value;
          const items = load(d);
          if (act === "del") items.splice(idx, 1);
          if (act === "up" && idx > 0)
            [items[idx - 1], items[idx]] = [items[idx], items[idx - 1]];
          if (act === "down" && idx < items.length - 1)
            [items[idx], items[idx + 1]] = [items[idx + 1], items[idx]];
          save(d, items);
          render(d);
        };
        clearDone.onclick = () => {
          const d = todoDateEl.value;
          save(
            d,
            load(d).filter((i) => !i.done)
          );
          render(d);
        };
        clearAll.onclick = () => {
          const d = todoDateEl.value;
          if (confirm("ç¡®è®¤æ¸…ç©ºè¯¥æ—¥ä»»åŠ¡ï¼Ÿ")) save(d, []);
          render(d);
        };
      }
    </script>
  </body>
</html>
