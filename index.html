<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Hello tomorrow</title>
    <style>
      :root {
        --bg: #fff8f3;
        --card: #ffffffee;
        --text: #3c3a36;
        --muted: #7a746d;
        --accent: #ff9f8c;
        --accent-hover: #ffb7a5;
        --ring: #f88c75;
        --line: #efe8e3;
        --ok: #10b981;
        --danger: #ef4444;
      }
      * {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: "Segoe UI", system-ui, -apple-system, Roboto, Helvetica,
          Arial;
        background: linear-gradient(
          180deg,
          #fff6ef 0%,
          #ffeede 50%,
          #fff5eb 100%
        );
        color: var(--text);
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 28px 0 48px;
      }
      .wrap {
        width: min(1100px, 94vw);
      }
      .greeting {
        text-align: center;
        margin-bottom: 16px;
      }
      .greeting h2 {
        font-size: 36px;
        margin: 0;
        color: #5c4033;
        font-weight: 700;
      }
      .greeting p {
        font-size: 18px;
        color: var(--muted);
        margin-top: 8px;
      }
      .card {
        background: var(--card);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(0, 0, 0, 0.05);
        border-radius: 28px;
        padding: 56px clamp(30px, 6vw, 72px);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
        margin-bottom: 20px;
      }
      header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 16px;
        margin-bottom: 16px;
      }
      h1 {
        font-size: 22px;
        margin: 0;
        letter-spacing: 0.5px;
        color: var(--muted);
        font-weight: 600;
      }
      .hint {
        font-size: 13px;
        color: var(--muted);
      }
      .quote {
        font-size: clamp(26px, 3.5vw, 38px);
        line-height: 1.6;
        margin: 28px 0 28px;
        color: #3c3a36;
      }
      .controls {
        display: flex;
        gap: 12px;
        align-items: center;
        flex-wrap: wrap;
      }
      button {
        background: var(--accent);
        color: #fff;
        border: 0;
        padding: 10px 18px;
        border-radius: 10px;
        font-weight: 600;
        cursor: pointer;
        font-size: 16px;
        transition: background 0.2s ease, transform 0.15s ease;
      }
      button:hover {
        background: var(--accent-hover);
        transform: translateY(-1px);
      }
      button:focus {
        outline: 2px solid var(--ring);
        outline-offset: 3px;
      }
      .ghost {
        background: transparent;
        border: 1px solid rgba(0, 0, 0, 0.15);
        color: var(--text);
        font-size: 16px;
        padding: 10px 18px;
        border-radius: 10px;
      }
      footer {
        margin-top: 14px;
        font-size: 14px;
        color: var(--muted);
      }
      .fade {
        opacity: 0;
        transform: translateY(6px);
        transition: opacity 0.3s ease, transform 0.3s ease;
      }
      .fade.show {
        opacity: 1;
        transform: translateY(0);
      }
      .small {
        font-size: 13px;
        color: var(--muted);
      }

      /* ===== Todo Section ===== */
      .todo-card {
        padding: 28px clamp(20px, 4vw, 40px);
      }
      .todo-head {
        display: flex;
        flex-wrap: wrap;
        gap: 14px;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 10px;
      }
      .todo-title {
        font-size: 20px;
        color: #5c4033;
        margin: 0;
        font-weight: 700;
      }
      .todo-sub {
        font-size: 13px;
        color: var(--muted);
      }
      .todo-row {
        display: flex;
        gap: 10px;
        align-items: center;
        margin: 8px 0 16px;
      }
      .todo-input {
        flex: 1;
        border: 1px solid var(--line);
        border-radius: 10px;
        padding: 10px 12px;
        font-size: 15px;
        outline: none;
      }
      .todo-input:focus {
        border-color: var(--ring);
        box-shadow: 0 0 0 2px #f88c7530;
      }
      .date {
        border: 1px solid var(--line);
        border-radius: 10px;
        padding: 8px 10px;
        font-size: 14px;
        color: var(--text);
        background: #fff;
      }
      .todo-list {
        list-style: none;
        padding: 0;
        margin: 0;
        border-top: 1px dashed var(--line);
      }
      .todo-item {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 12px 6px;
        border-bottom: 1px dashed var(--line);
      }
      .todo-item label {
        flex: 1;
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .todo-time {
        display: flex;
        align-items: center;
        gap: 4px;
      }
      .todo-time input {
        width: 90px;
        border: 1px solid var(--line);
        border-radius: 6px;
        padding: 4px;
        font-size: 13px;
      }

      .todo-text {
        flex: 1;
      }
      .todo-text.done {
        color: #9aa0a6;
        text-decoration: line-through;
      }
      .todo-actions {
        display: flex;
        gap: 6px;
      }
      .todo-actions button {
        border: none;
        background: var(--accent);
        color: #fff;
        padding: 6px 10px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 13px;
      }
      .todo-actions .edit {
        background: #febb12ff;
      }
      .todo-actions .delete {
        background: #f33838ff;
      }
      .btn-ghost {
        background: transparent;
        border: 1px solid rgba(0, 0, 0, 0.12);
        color: var(--text);
        padding: 8px 12px;
        border-radius: 10px;
        font-size: 14px;
      }
      .btn-ok {
        background: var(--ok);
        color: #fff;
        border: 0;
      }
      .btn-danger {
        background: var(--danger);
        color: #fff;
        border: 0;
      }
      .stats {
        display: flex;
        align-items: center;
        gap: 12px;
        justify-content: space-between;
        margin-top: 10px;
        color: var(--muted);
        font-size: 13px;
      }
      .bar {
        height: 10px;
        background: #f1efe9;
        border-radius: 999px;
        overflow: hidden;
      }
      .bar > span {
        display: block;
        height: 100%;
        background: var(--ok);
        width: 0%;
        transition: width 0.25s ease;
      }
      /* ===== ä¸¤å¡ç‰‡å¹¶æ’å¸ƒå±€ ===== */
      .flex-row {
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
      }

      .flex-left {
        flex: 2; /* Todo æ›´å¤§ */
      }

      .flex-right {
        flex: 1; /* å¿ƒæƒ…å¡ç‰‡æ›´å° */
        min-width: 260px;
      }

      /* ===== å¿ƒæƒ…å¡ç‰‡æ ·å¼ ===== */
      .mood-card {
        background: var(--card);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(0, 0, 0, 0.05);
        border-radius: 20px;
        padding: 24px 28px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
      }

      .mood-title {
        font-size: 20px;
        color: #5c4033;
        margin: 0 0 14px;
        font-weight: 700;
      }

      .mood-label {
        font-size: 13px;
        color: var(--muted);
        margin-bottom: 4px;
      }

      .mood-select,
      .mood-text {
        width: 100%;
        border: 1px solid var(--line);
        border-radius: 10px;
        padding: 10px 12px;
        font-size: 14px;
        margin-bottom: 14px;
      }

      .mood-text {
        height: 80px;
        resize: vertical;
      }

      .mood-select:focus,
      .mood-text:focus {
        border-color: var(--ring);
        box-shadow: 0 0 0 2px #f88c7530;
      }
      .joy-input {
        width: 100%;
        border: 1px solid var(--line);
        border-radius: 10px;
        padding: 10px 12px;
        font-size: 14px;
        margin-bottom: 12px;
      }

      .joy-input:focus {
        border-color: var(--ring);
        box-shadow: 0 0 0 2px #f88c7530;
        outline: none;
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <div class="greeting">
        <h2>æ–°çš„ä¸€å¤©å¼€å§‹äº†ï¼ğŸ™Œ</h2>
        <p>æ„¿ä»Šå¤©çš„ä½ ğŸ‘©ğŸ»â€ğŸ’»æ¸©æš–ã€è‡ªä¿¡ã€é—ªé—ªå‘å…‰ã€‚</p>
      </div>

      <!-- Affirmation Card -->
      <div class="card" id="card" tabindex="0" title="ç‚¹å‡»å¡ç‰‡æˆ–æŒ‰ç©ºæ ¼ï¼Œæ¢ä¸€å¥">
        <header>
          <h1>æ¯æ—¥è‚¯å®šè¯­ Â· Random Affirmation</h1>
          <div class="hint">ç‚¹å‡»å¡ç‰‡åˆ·æ–°</div>
        </header>
        <div id="quote" class="quote fade">åŠ è½½ä¸­...</div>
        <div class="controls">
          <button id="nextBtn" aria-label="æ¢ä¸€å¥">ğŸ¥° æ¢ä¸€å¥</button>
          <button id="copyBtn" class="ghost" aria-label="å¤åˆ¶è¿™å¥">
            ğŸ“‹ å¤åˆ¶
          </button>
          <span class="small" id="counter"></span>
        </div>
        <footer>æ¯å¤©è¯»ä¸€å¥ï¼Œæ¸©æŸ”ã€æœ‰åŠ›åœ°å¼€å¯æ–°çš„ä¸€å¤©ã€‚</footer>
      </div>

      <div class="flex-row">
        <div class="flex-left">
          <!-- Todo Card -->
          <div class="card todo-card" id="todoCard">
            <div class="todo-head">
              <h3 class="todo-title">ä»Šæ—¥å¾…åŠ Â· Toâ€‘Do</h3>
              <div>
                <label class="todo-sub" for="todoDate">é€‰æ‹©æ—¥æœŸï¼š</label>
                <input id="todoDate" class="date" type="date" />
              </div>
            </div>
            <div class="todo-row">
              <input
                id="todoInput"
                class="todo-input"
                placeholder="å†™ä¸‹ä½ ä»Šå¤©è¦å®Œæˆçš„ä¸€ä»¶å°äº‹â€¦ å›è½¦æ·»åŠ "
              />
              <button id="addBtn" class="btn-ghost">æ·»åŠ </button>
            </div>
            <ul id="todoList" class="todo-list"></ul>
            <div class="stats">
              <div>è¿›åº¦ï¼š<span id="statText">0/0</span></div>
              <div class="bar" style="flex: 1"><span id="statBar"></span></div>
              <div class="todo-actions">
                <button id="clearDone" class="btn-ghost">æ¸…é™¤å·²å®Œæˆ</button>
                <button id="clearAll" class="btn-ghost">æ¸…ç©º</button>
              </div>
            </div>
          </div>
        </div>

        <!-- å³ â€”â€” Mood -->
        <div class="flex-right">
          <div class="mood-card">
            <h3 class="mood-title">ä»Šæ—¥å¿ƒæƒ… Â· Mood</h3>

            <label class="mood-label">å¿ƒæƒ…ï¼š</label>
            <select id="moodSelect" class="mood-select">
              <option value="">è¯·é€‰æ‹©</option>
              <option>ğŸ˜Š å¼€å¿ƒ</option>
              <option>ğŸ˜Œ å¹³é™</option>
              <option>ğŸ˜¢ éš¾è¿‡</option>
              <option>ğŸ˜¤ ç”Ÿæ°”</option>
              <option>ğŸ˜Ÿ é¸­åŠ›å¤§</option>
              <option>ğŸ¤© å…´å¥‹</option>
            </select>

            <label class="mood-label">Joys in life </label>

            <div>
              <label class="mood-label">1. </label
              ><input
                id="joy1"
                class="joy-input"
                placeholder="ä»Šå¤©è®©æˆ‘æœ€æ„Ÿæ¿€çš„æ˜¯ä»€ä¹ˆï¼Ÿ ğŸ€"
              />
            </div>

            <div>
              <label class="mood-label">2. </label
              ><input
                id="joy2"
                class="joy-input"
                placeholder="å“ªä»¶å°äº‹ç»™äº†æˆ‘æ¸©æš–æˆ–åŠ›é‡ï¼Ÿ âœ¨"
              />
            </div>

            <div>
              <label class="mood-label">3. </label
              ><input
                id="joy3"
                class="joy-input"
                placeholder="ä»Šå¤©æˆ‘æƒ³ç‰¹åˆ«æ„Ÿè°¢ä»€ä¹ˆï¼Ÿ ğŸ’›"
              />
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      /* ================== è‚¯å®šè¯­ ================== */
      const AFFIRMATIONS = [
        "æˆ‘æ­£èµ°åœ¨æˆä¸ºä¼˜ç§€ SDE çš„è·¯ä¸Šã€‚",
        "æˆ‘å€¼å¾—æ‹¥æœ‰ä¸€ä»½è®©æˆ‘å……æ»¡çƒ­æƒ…çš„å·¥ä½œã€‚",
        "æ¯ä¸€ä¸ªæ—©èµ·çš„æ¸…æ™¨éƒ½è®©æˆ‘ç¦»æˆåŠŸæ›´è¿‘ã€‚",
        "æˆ‘ç›¸ä¿¡è‡ªå·±æ­£åœ¨è¢«ç†æƒ³çš„æœºä¼šçœ‹è§ã€‚",
        "æˆ‘é…å¾—ä¸Šå¹´è–ª $150K+ çš„èŒä½ä¸è®¤å¯ã€‚",
        "æˆ‘ä¸“æ³¨ã€èªæ˜ã€æœ‰æ¯…åŠ›ï¼Œæˆ‘çš„åŠªåŠ›ä¼šè¢«å›æŠ¥ã€‚",
        "æ¯ä¸€æ¬¡æŠ•é€’å’Œç»ƒä¹ éƒ½æ˜¯å‘æ¢¦æƒ³è¿ˆè¿›çš„ä¸€æ­¥ã€‚",
        "æˆ‘æ­£åœ¨å¸å¼•ä¸€ä¸ªä¿¡ä»»æˆ‘èƒ½åŠ›çš„å›¢é˜Ÿã€‚",
        "æˆ‘èƒ½æ²‰ç€åœ°é¢å¯¹é¢è¯•ï¼Œå±•ç°æœ€çœŸå®çš„è‡ªå·±ã€‚",
        "åˆé€‚çš„æœºä¼šæ­£å‘æˆ‘é è¿‘ï¼Œæˆ‘æ­£åœ¨å‡†å¤‡è¿æ¥ã€‚",
        "æˆ‘æœ‰æ¸…æ™°çš„ç›®æ ‡ï¼Œä¹Ÿæœ‰å®ç°å®ƒçš„å‹‡æ°”ã€‚",
        "æˆ‘åœ¨å‹åŠ›ä¸­ä¿æŒæ¸…æ™°ï¼Œåœ¨å˜åŒ–ä¸­ä¿æŒå¹³é™ã€‚",
        "æˆ‘å…è®¸è‡ªå·±ä¸å®Œç¾ï¼Œä¹Ÿä¾ç„¶å€¼å¾—è¢«çˆ±ä¸å°Šé‡ã€‚",
        "æˆ‘æœ‰æƒé€‰æ‹©è®©æˆ‘å¹³é™ä¸”æœ‰åŠ›é‡çš„ç¯å¢ƒã€‚",
        "æˆ‘æ­£åœ¨æˆé•¿ä¸ºç†æƒ³ä¸­çš„è‡ªå·±ã€‚",
        "æ¯ä¸€ä¸ªå°è¿›æ­¥éƒ½å€¼å¾—åº†ç¥ã€‚",
        "æˆ‘ç›¸ä¿¡è¿‡ç¨‹ï¼Œä¹Ÿç›¸ä¿¡è‡ªå·±çš„èŠ‚å¥ã€‚",
        "æˆ‘æ‹¥æœ‰å®ç°ç›®æ ‡çš„æ™ºæ…§å’Œè€å¿ƒã€‚",
        "æˆ‘å€¼å¾—è¢«ç†è§£ã€è¢«æ”¯æŒã€è¢«æ¬£èµã€‚",
        "æˆ‘çš„åŠªåŠ›æ­£åœ¨ç§¯ç´¯æˆçœ‹å¾—è§çš„æˆæœã€‚",
        "æˆ‘åœ¨æŒ‘æˆ˜ä¸­å­¦ä¹ ï¼Œä¹Ÿåœ¨å¤±è´¥ä¸­æˆé•¿ã€‚",
        "æˆ‘ç›¸ä¿¡åˆé€‚çš„å…¬å¸åœ¨ç­‰æˆ‘åŠ å…¥ã€‚",
        "æˆ‘èƒ½å¤Ÿå†·é™å¤„ç†å‹åŠ›ä¸ä¸ç¡®å®šæ€§ã€‚",
        "æˆ‘æ­£åœ¨åŸ¹å…»è‡ªå¾‹ä¸ç¨³å®šçš„ä¹ æƒ¯ã€‚",
        "æˆ‘æ„Ÿæ¿€æ¯ä¸€ä¸ªå­¦ä¹ å’Œå°è¯•çš„æœºä¼šã€‚",
        "æˆ‘æœ‰èƒ½åŠ›åˆ›é€ æˆ‘æƒ³è¦çš„ç”Ÿæ´»ã€‚",
        "æˆ‘åœ¨å·¥ä½œä¸­å±•ç°ä¸“ä¸šï¼Œä¹Ÿåœ¨ç”Ÿæ´»ä¸­ä¿æŒæ¸©æŸ”ã€‚",
        "æˆ‘å€¼å¾—è¢«å°Šé‡ã€è¢«ä¿¡ä»»ã€‚",
        "æ¯ä¸€ä¸ªç°åœ¨çš„è‡ªå·±éƒ½æ¯”æ˜¨å¤©æ›´å¼ºå¤§ã€‚",
        "æˆ‘å…è®¸è‡ªå·±æ”¾ä¸‹ç„¦è™‘ï¼Œå›åˆ°å½“ä¸‹ã€‚",
        "æˆ‘ç›¸ä¿¡æˆ‘çš„æœªæ¥æ­£åœ¨æ…¢æ…¢æˆå½¢ã€‚",
        "æˆ‘æ­£åœ¨é è¿‘å±äºæˆ‘çš„æˆåŠŸä¸å¹¸ç¦ã€‚",
        "æˆ‘çš„å¿ƒæ€å¹³å’Œã€ç¨³å®šè€Œè‡ªä¿¡ã€‚",
        "æˆ‘çŸ¥é“æˆ‘æœ‰æ— é™çš„æ½œåŠ›ç­‰å¾…è¢«é‡Šæ”¾ã€‚",
        "æˆ‘é€‰æ‹©ä¸“æ³¨äºæˆ‘èƒ½æŒæ§çš„éƒ¨åˆ†ã€‚",
        "æˆ‘èƒ½åœ¨åŠªåŠ›ä¸ä¼‘æ¯ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ã€‚",
        "æˆ‘å€¼å¾—è¢«çˆ±ï¼Œä¹Ÿå€¼å¾—æ‹¥æœ‰å¹³é™çš„ç”Ÿæ´»ã€‚",
        "æˆ‘ä¿¡ä»»æ—¶é—´ã€ä¿¡ä»»è‡ªå·±ã€ä¿¡ä»»è¿‡ç¨‹ã€‚",
        "æˆ‘æ„Ÿæ¿€æ¯ä¸€ä¸ªæŒ‘æˆ˜è®©æˆ‘æ›´åšéŸ§ã€‚",
        "æˆ‘å…è®¸è‡ªå·±å¶å°”æ…¢ä¸€ç‚¹ï¼Œå› ä¸ºæˆ‘å§‹ç»ˆåœ¨è·¯ä¸Šã€‚",
        "æˆ‘èƒ½æ¸…æ¥šåœ°è¡¨è¾¾è‡ªå·±ï¼Œåˆ«äººä¹Ÿæ„¿æ„å€¾å¬ã€‚",
        "æˆ‘ä¸ä¸–ç•Œçš„è¿æ¥æ˜¯æ¸©æš–çš„ã€è‰¯æ€§çš„ã€‚",
        "æˆ‘å¯¹ç”Ÿæ´»ä¿æŒå¥½å¥‡å’Œçƒ­æƒ…ã€‚",
        "æˆ‘ä¸ºè‡ªå·±çš„æˆé•¿æ„Ÿåˆ°éª„å‚²ã€‚",
        "æˆ‘çš„èƒ½é‡å¸å¼•ç€ç§¯æçš„æœºä¼šã€‚",
        "æˆ‘èƒ½ç¨³ç¨³åœ°èµ°åœ¨æ¢¦æƒ³çš„è·¯ä¸Šã€‚",
        "æˆ‘å€¼å¾—æ‹¥æœ‰å¥åº·ã€çˆ±ä¸ä¸°ç››ã€‚",
        "ä»Šå¤©çš„æˆ‘å·²ç»è¶³å¤Ÿå¥½ï¼Œä¹Ÿåœ¨å˜å¾—æ›´å¥½ã€‚",
        "æˆ‘å¿ƒä¸­æœ‰å…‰ï¼Œä¹Ÿèƒ½ç…§äº®ä»–äººã€‚",
        "æˆ‘ç›¸ä¿¡ç”Ÿæ´»æ­£åœ¨æœç€æœ€å¥½çš„æ–¹å‘å±•å¼€ã€‚",
        "æˆ‘å€¼å¾—è¢«å–œæ¬¢ï¼Œä¹Ÿä¸éœ€è¦å®Œç¾æ‰èƒ½è¢«çˆ±ã€‚",
        "æˆ‘å¯ä»¥åŒæ—¶æ¸©æŸ”åˆæœ‰åŠ›é‡ï¼Œä¸å¿…å‹æŠ‘è‡ªå·±ã€‚",
        "åˆ«äººçš„æƒ…ç»ªä¸æ˜¯æˆ‘çš„è´£ä»»ï¼Œä½†æˆ‘çš„çœŸè¯šæ°¸è¿œæœ‰ä»·å€¼ã€‚",
        "å³ä½¿åˆ«äººä¸€æ—¶è¯¯è§£æˆ‘ï¼Œæˆ‘ä»ç„¶æ˜¯æ„¿æ„æ²Ÿé€šã€ä¸æ–­æˆé•¿çš„äººã€‚",
        "æˆ‘å…è®¸å…³ç³»é‡Œæœ‰ä¸€ç‚¹ä¸ç¡®å®šï¼Œè¿™å¹¶ä¸ä¼šå‡å°‘æˆ‘çš„è¢«çˆ±æ„Ÿã€‚",
        "å½“æˆ‘è¡¨è¾¾ç•Œé™æ—¶ï¼Œæˆ‘æ˜¯åœ¨å®ˆæŠ¤è‡ªå·±å’Œå…³ç³»çš„å¥åº·ã€‚",
        "æˆ‘æ‹¥æœ‰ä¿®å¤å…³ç³»çš„èƒ½åŠ›ï¼Œä¹Ÿæœ‰ç‹¬å¤„çš„å®‰å…¨æ„Ÿã€‚",
        "æˆ‘å¯ä»¥æ”¾ä¸‹å¯¹è¢«å¦å®šçš„ææƒ§ï¼Œé€‰æ‹©ç›¸ä¿¡å–„æ„ã€‚",
        "æˆ‘ä¸éœ€è¦æ€¥äºè¯æ˜è‡ªå·±çš„ä»·å€¼ï¼Œå®ƒæœ¬æ¥å°±å­˜åœ¨ã€‚",
        "æˆ‘èƒ½åœ¨ç†è§£åˆ«äººä¹‹å‰ï¼Œå…ˆç†è§£è‡ªå·±çš„æƒ…ç»ªã€‚",
        "æˆ‘æ˜¯ä¸€ä¸ªèƒ½å¸¦æ¥ç§©åºä¸æ¸…æ™°çš„äººã€‚",
        "æˆ‘æ¨åŠ¨äº‹æƒ…å‘å±•ï¼Œæ˜¯åœ¨åˆ›é€ æ›´å¥½çš„ç»“æœï¼Œè€Œä¸æ˜¯ä¸ºäº†æ§åˆ¶ã€‚",
        "æˆ‘çš„å†·é™ä¸æœæ–­æ˜¯å›¢é˜Ÿçš„å®‰å…¨æ„Ÿæ¥æºã€‚",
        "æˆ‘ä¸å¿…äº‹äº‹äº²åŠ›äº²ä¸ºï¼Œä¹Ÿèƒ½æˆä¸ºå€¼å¾—ä¿¡èµ–çš„é¢†å¯¼è€…ã€‚",
        "æˆ‘èƒ½å¤Ÿå¹³è¡¡è´Ÿè´£ä¸æ”¾æ‰‹ï¼Œä¿¡ä»»å›¢é˜Ÿçš„æˆé•¿ã€‚",
        "å½“æˆ‘ä¸»åŠ¨æ‰¿æ‹…æ—¶ï¼Œæˆ‘å±•ç°çš„æ˜¯æˆç†Ÿä¸å‹‡æ°”ã€‚",
        "æˆ‘çš„é«˜æ ‡å‡†æ¿€åŠ±ä»–äººï¼Œè€Œä¸æ˜¯å‹è¿«ä»–ä»¬ã€‚",
        "æˆ‘å¯ä»¥åœ¨å…³é”®æ—¶åˆ»å†³æ–­ï¼Œä¹Ÿèƒ½åœ¨å¹³å¸¸æ—¶åˆ»å€¾å¬ã€‚",
        "æˆ‘ä¸éœ€è¦å£°éŸ³æœ€å¤§ï¼Œä½†æˆ‘çš„å½±å“åŠ›å§‹ç»ˆå­˜åœ¨ã€‚",
        "æˆ‘ä»¥è¡ŒåŠ¨ä¼ é€’ç¨³å®šï¼Œä¹Ÿä»¥æ¸©æŸ”å»ºç«‹ä¿¡ä»»ã€‚",
      ];

      const quoteEl = document.getElementById("quote");
      const nextBtn = document.getElementById("nextBtn");
      const copyBtn = document.getElementById("copyBtn");
      const counter = document.getElementById("counter");
      const card = document.getElementById("card");

      let pool = [...Array(AFFIRMATIONS.length).keys()]; // 0..n-1

      function pickRandomIndex() {
        if (pool.length === 0) {
          pool = [...Array(AFFIRMATIONS.length).keys()];
        }

        const r = Math.floor(Math.random() * pool.length);
        const idx = pool[r];

        // åˆ é™¤å·²ç”¨
        pool.splice(r, 1);

        const viewed = AFFIRMATIONS.length - pool.length;
        counter.textContent = `ä»Šæ—¥å·²é˜…ï¼š${viewed}/${AFFIRMATIONS.length}`;

        return idx;
      }

      function showRandom() {
        const idx = pickRandomIndex();
        const text = AFFIRMATIONS[idx];
        quoteEl.classList.remove("show");
        setTimeout(() => {
          quoteEl.textContent = text;
          quoteEl.classList.add("show");
        }, 80);
      }

      function copyCurrent() {
        const text = quoteEl.textContent.trim();
        if (!text) return;
        navigator.clipboard
          ?.writeText(text)
          .then(() => {
            copyBtn.textContent = "âœ… å·²å¤åˆ¶";
            setTimeout(() => (copyBtn.textContent = "ğŸ“‹ å¤åˆ¶"), 1400);
          })
          .catch(() => {
            alert("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©æ–‡æœ¬å¤åˆ¶");
          });
      }

      nextBtn.addEventListener("click", showRandom);
      copyBtn.addEventListener("click", copyCurrent);
      card.addEventListener("click", (e) => {
        if (e.target.tagName.toLowerCase() === "button") return;
        showRandom();
      });

      /* åˆå§‹æ˜¾ç¤ºä¸€å¥ */
      window.addEventListener("DOMContentLoaded", () => {
        showRandom();
        initTodo();
      });

      /* ================== Todo ================== */
      const todoDateEl = document.getElementById("todoDate");
      const todoInput = document.getElementById("todoInput");
      const addBtn = document.getElementById("addBtn");
      const todoList = document.getElementById("todoList");
      const statText = document.getElementById("statText");
      const statBar = document.getElementById("statBar");
      const clearDone = document.getElementById("clearDone");
      const clearAll = document.getElementById("clearAll");

      /* ===== æŒ‰é’®ç»Ÿä¸€æ ·å¼ ===== */
      const buttonStyles = {
        base: "border:none;color:#fff;padding:6px 10px;border-radius:6px;font-weight:400;font-size:13px;cursor:pointer;",
        edit: "background:#fbbf24;", // é»„è‰² - ç¼–è¾‘
        move: "background:#f97316;", // æ©™è‰² - ä¸Šä¸‹ç§»åŠ¨
        delete: "background:#ef4444;", // çº¢è‰² - åˆ é™¤
      };

      function fmtDate(d) {
        const y = d.getFullYear();
        const m = String(d.getMonth() + 1).padStart(2, "0");
        const da = String(d.getDate()).padStart(2, "0");
        return `${y}-${m}-${da}`;
      }

      function keyFor(dateStr) {
        return `todo-${dateStr}`;
      }

      function load(dateStr) {
        try {
          return JSON.parse(localStorage.getItem(keyFor(dateStr)) || "[]");
        } catch {
          return [];
        }
      }

      function save(dateStr, items) {
        localStorage.setItem(keyFor(dateStr), JSON.stringify(items));
      }

      function render(dateStr) {
        const items = load(dateStr);
        todoList.innerHTML = "";
        items.forEach((it, i) => {
          const li = document.createElement("li");
          li.className = "todo-item";
          li.innerHTML = `
      <label>
        <input type="checkbox" ${it.done ? "checked" : ""} data-idx="${i}"/>
        <span class="todo-text ${
          it.done ? "done" : ""
        }" data-idx="${i}" contenteditable="false">${it.text}</span>
      </label>
      <div class="todo-time">
        <input type="time" class="start-time" value="${
          it.start || ""
        }" data-idx="${i}"/> -
        <input type="time" class="end-time" value="${
          it.end || ""
        }" data-idx="${i}"/>
      </div>
      <div class="todo-actions">
        <button class="btn" style="${
          buttonStyles.base + buttonStyles.edit
        }" data-act="edit" data-idx="${i}">ç¼–è¾‘</button>
        <button class="btn" style="${
          buttonStyles.base + buttonStyles.move
        }" data-act="up" data-idx="${i}">â†‘</button>
        <button class="btn" style="${
          buttonStyles.base + buttonStyles.move
        }" data-act="down" data-idx="${i}">â†“</button>
        <button class="btn" style="${
          buttonStyles.base + buttonStyles.delete
        }" data-act="del" data-idx="${i}">åˆ é™¤</button>
      </div>`;
          todoList.appendChild(li);
        });

        const done = items.filter((x) => x.done).length;
        statText.textContent = `${done}/${items.length}`;
        const pct = items.length ? Math.round((done / items.length) * 100) : 0;
        statBar.style.width = pct + "%";

        todoList.onchange = (e) => {
          const idx = e.target.dataset.idx;
          if (idx == null) return;
          const d = todoDateEl.value;
          const items = load(d);

          if (e.target.type === "time") {
            const key = e.target.classList.contains("start-time")
              ? "start"
              : "end";
            items[idx][key] = e.target.value;
            save(d, items);
          } else if (e.target.type === "checkbox") {
            items[idx].done = e.target.checked;
            save(d, items);
            render(d);
          }
        };

        todoList.onclick = (e) => {
          const act = e.target.dataset.act;
          if (!act) return;
          const idx = +e.target.dataset.idx;
          const d = todoDateEl.value;
          const items = load(d);

          if (act === "edit") {
            const textSpan = todoList.querySelector(
              `.todo-text[data-idx='${idx}']`
            );
            if (textSpan) {
              textSpan.setAttribute("contenteditable", "true");
              textSpan.focus();
              document.execCommand("selectAll", false, null);
              textSpan.addEventListener(
                "blur",
                () => {
                  textSpan.setAttribute("contenteditable", "false");
                  items[idx].text = textSpan.textContent.trim();
                  save(d, items);
                },
                { once: true }
              );
            }
          }

          if (act === "del") {
            items.splice(idx, 1);
            save(d, items);
            render(d);
          }
          if (act === "up" && idx > 0) {
            [items[idx - 1], items[idx]] = [items[idx], items[idx - 1]];
            save(d, items);
            render(d);
          }
          if (act === "down" && idx < items.length - 1) {
            [items[idx + 1], items[idx]] = [items[idx], items[idx + 1]];
            save(d, items);
            render(d);
          }
        };
      }

      function initTodo() {
        const today = fmtDate(new Date());
        todoDateEl.value = today;
        render(today);

        todoDateEl.onchange = () => render(todoDateEl.value);

        function add() {
          const text = todoInput.value.trim();
          if (!text) return;
          const d = todoDateEl.value;
          const items = load(d);
          items.push({ id: Date.now(), text, done: false, start: "", end: "" });
          save(d, items);
          todoInput.value = "";
          render(d);
        }

        addBtn.onclick = add;
        todoInput.onkeydown = (e) => {
          if (e.key === "Enter") add();
        };

        clearDone.onclick = () => {
          const d = todoDateEl.value;
          const items = load(d).filter((i) => !i.done);
          save(d, items);
          render(d);
        };

        clearAll.onclick = () => {
          const d = todoDateEl.value;
          if (!confirm("ç¡®è®¤æ¸…ç©ºè¯¥æ—¥çš„æ‰€æœ‰ä»»åŠ¡ï¼Ÿ")) return;
          save(d, []);
          render(d);
        };
      }
    </script>
  </body>
</html>
